(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8b86ca24"],{"00f3":function(e,t){var a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getKontrak"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"rekapKegiatans"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pekerjaan"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"desa"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"kecamatan"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nomor_kontrak"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nilai_kontrak"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nama_rekanan"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tgl_mulai"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tgl_selesai"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"deleteRekapKegiatan"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteRekapKegiatan"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"where"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}]}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"rekapKegiatan"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:302}};a.loc.source={body:"query getKontrak {\n  rekapKegiatans{\n    id\n    pekerjaan\n    desa\n    kecamatan\n    nomor_kontrak\n    nilai_kontrak\n    nama_rekanan\n    tgl_mulai\n    tgl_selesai\n  }\n}\nmutation deleteRekapKegiatan($id: ID!) {\n  deleteRekapKegiatan(input: {where: {id: $id}}) {\n    rekapKegiatan {\n      id\n    }\n  }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var a=e.type;"NamedType"===a.kind&&t.add(a.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,t)})),e.definitions&&e.definitions.forEach((function(e){n(e,t)}))}var i={};function r(e,t){for(var a=0;a<e.definitions.length;a++){var n=e.definitions[a];if(n.name&&n.name.value==t)return n}}function s(e,t){var a={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var n=i[t]||new Set,s=new Set,o=new Set;n.forEach((function(e){o.add(e)}));while(o.size>0){var l=o;o=new Set,l.forEach((function(e){if(!s.has(e)){s.add(e);var t=i[e]||new Set;t.forEach((function(e){o.add(e)}))}}))}return s.forEach((function(t){var n=r(e,t);n&&a.definitions.push(n)})),a}(function(){a.definitions.forEach((function(e){if(e.name){var t=new Set;n(e,t),i[e.name.value]=t}}))})(),e.exports=a,e.exports["getKontrak"]=s(a,"getKontrak"),e.exports["deleteRekapKegiatan"]=s(a,"deleteRekapKegiatan")},"4a2b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("vx-card",[a("vs-table",{attrs:{sst:!0,pagination:"","max-items":"5",search:"",data:e.rekapkontrak},on:{search:e.handleSearch,"change-page":e.handleChangePage,sort:e.handleSort},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.data;return e._l(n,(function(t,i){return a("vs-tr",{key:i,attrs:{data:t}},[a("vs-td",{attrs:{data:n[i].id}},[e._v("\n            "+e._s(n[i].pekerjaan)+"\n          ")]),a("vs-td",{attrs:{data:n[i].id}},[e._v("\n            "+e._s(n[i].desa)+"\n          ")]),a("vs-td",{attrs:{data:n[i].id}},[e._v("\n            "+e._s(n[i].kecamatan)+"\n          ")]),a("template",{staticClass:"expand-user",slot:"expand"},[a("div",{staticClass:"con-expand-users w-full"},[a("div",{staticClass:"con-btns-user flex items-center justify-between"},[a("div",{staticClass:"con-userx flex items-center justify-start"},[a("span",[e._v(e._s(t.nama_rekanan))])]),a("div",{staticClass:"flex"},[a("vx-tooltip",{attrs:{text:"Klik untuk mengubah data",position:"left"}},[a("vs-button",{staticClass:"mr-2",attrs:{type:"border",size:"small","icon-pack":"feather",icon:"icon-edit",color:"success"},on:{click:function(a){return e.$router.push("/2021/datakontrak/?edit="+t.id)}}})],1),a("vx-tooltip",{attrs:{text:"Klik untuk menghapus data",position:"left"}},[a("vs-button",{attrs:{type:"border",size:"small","icon-pack":"feather",icon:"icon-trash",color:"danger"},on:{click:function(a){return e.deleteKontrak(t)}}})],1)],1)]),a("vs-list",[a("vs-list-item",{attrs:{"icon-pack":"feather",icon:"icon-calendar",title:"Mulai"}},[e._v(e._s(t.tgl_mulai))]),a("vs-list-item",{attrs:{"icon-pack":"feather",icon:"icon-calendar",title:"Selesai"}},[e._v(e._s(t.tgl_selesai))]),a("vs-list-item",{attrs:{"icon-pack":"feather",icon:"icon-file-text",title:"Nomor Kontrak"}},[e._v(e._s(t.nomor_kontrak))]),a("vs-list-item",{attrs:{"icon-pack":"feather",icon:"icon-file-text",title:"Nilai Konrak"}},[e._v(e._s(t.nilai_kontrak))])],1)],1)])],2)}))}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[[a("div",{staticClass:"flex flex-wrap-reverse items-center flex-grow justify-between",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"flex flex-wrap-reverse items-center"},[a("div",{staticClass:"p-3 mb-4 mr-4 rounded-lg cursor-pointer flex items-center justify-between text-lg font-medium text-base text-primary border border-solid border-primary",on:{click:function(t){return e.$router.push("/2021/datakontrak")}}},[a("feather-icon",{attrs:{icon:"PlusIcon",svgClasses:"h-4 w-4"}}),a("span",{staticClass:"ml-2 text-base text-primary"},[e._v("Tambah")])],1),a("div",{staticClass:"p-3 mb-4 mr-4 rounded-lg cursor-pointer flex items-center justify-between text-lg font-medium text-base text-primary border border-solid border-primary",on:{click:function(t){e.activePrompt2=!0}}},[a("feather-icon",{attrs:{icon:"SaveIcon",svgClasses:"h-4 w-4"}}),a("span",{staticClass:"ml-2 text-base text-primary"},[e._v("Download Data")]),a("vs-prompt",{attrs:{"vs-active":e.activePrompt2},on:{"vs-accept":e.exportToExcel,"update:vsActive":function(t){e.activePrompt2=t},"update:vs-active":function(t){e.activePrompt2=t}}},[a("div",{staticClass:"con-exemple-prompt"},[e._v("\n                  Masukkan Nama dan Format File yang Diinginkan\n                  "),a("vs-input",{staticClass:"w-full",attrs:{name:"nama_file",placeholder:"Nama File.."},model:{value:e.fileName,callback:function(t){e.fileName=t},expression:"fileName"}}),a("vs-select",{attrs:{label:"Format"},model:{value:e.selectedFormat,callback:function(t){e.selectedFormat=t},expression:"selectedFormat"}},e._l(e.formats,(function(e,t){return a("vs-select-item",{key:t,attrs:{value:e.value,text:e.text}})})),1)],1)])],1)])])],a("template",{slot:"thead"},[a("vs-th",{attrs:{"sort-key":"pekerjaan"}},[e._v("Pekerjaan")]),a("vs-th",{attrs:{"sort-key":"desa"}},[e._v("Desa")]),a("vs-th",{attrs:{"sort-key":"kecamatan"}},[e._v("Kecamatan")])],1)],2)],1)],1)},i=[],r=a("c93e"),s=(a("20d6"),a("ac6a"),a("00f3")),o=(a("4a7a"),a("8291")),l=a("0a35"),c={components:{VxCard:o["a"],PlusIcon:l["PlusIcon"]},data:function(){return{fileName:"",formats:[{text:"xlsx",value:"xlsx"},{text:"csv",value:"csv"},{text:"txt",value:"txt"}],cellAutoWidth:!0,selectedFormat:"xlsx",activePrompt2:!1,val:"",valMultipe:{value1:"",value2:""},rekapkontrak:[],selected:[],headerVal:["id","desa","kecamatan","pekerjaan","tgl_mulai","tgl_selesai","nomor_kontrak","nilai_kontrak"]}},apollo:{rekapkontrak:{query:s["getKontrak"],variables:function(){},update:function(e){var t=e.rekapKegiatans;return t}}},computed:{validName:function(){return this.valMultipe.value1.length>0&&this.valMultipe.value2.length>0}},methods:{exportToExcel:function(){var e=this;Promise.all([a.e("chunk-2d0aa5b8"),a.e("chunk-25dfa9cd"),a.e("chunk-39baaeee")]).then(a.bind(null,"4bf8d")).then((function(t){var a=["ID","Desa","Kecamatan","Pekerjaan","Mulai","Selesai","Nomor Kontrak","Nilai kontrak"],n=e.rekapkontrak,i=e.formatJson(e.headerVal,n);t.export_json_to_excel({header:a,data:i,filename:e.fileName,autoWidth:!0,bookType:e.selectedFormat})})),this.$vs.notify({color:"success",title:"Unduh Data",text:"Data Telah Berhasil Diunduh"})},formatJson:function(e,t){return t.map((function(t){return e.map((function(e){return t[e]}))}))},deleteKontrak:function(e){this.selected,this.$apollo.mutate({mutation:s["deleteRekapKegiatan"],variables:{id:e.id},update:function(t){var a=[{query:s["getKontrak"]},{query:s["getKontrak"],variables:{}}],n=a.map((function(e){return t.readQuery(e)}));n.forEach((function(t){var a=t.rekapKegiatans,n=a.findIndex((function(t){return t.id===e.id}));-1!==n&&a.splice(n,1)})),a.forEach((function(e,a){t.writeQuery(Object(r["a"])({},e,{data:n[a]}))}))}}),location.reload()},handleSearch:function(e){var t="The user searched for: ".concat(e,"\n");this.$refs.pre.appendChild(document.createTextNode(t))},handleChangePage:function(e){var t="The user changed the page to: ".concat(e,"\n");this.$refs.pre.appendChild(document.createTextNode(t))},handleSort:function(e,t){var a="the user ordered: ".concat(e," ").concat(t,"\n");this.$refs.pre.appendChild(document.createTextNode(a))},acceptAlert:function(){this.clearValMultiple(),this.$vs.notify({color:"success",title:"Unduh Data",text:"Data Telah Berhasil Diunduh"})},close:function(){this.$vs.notify({color:"danger",title:"Closed",text:"You close a dialog!"})},clearValMultiple:function(){this.valMultipe.value1="",this.valMultipe.value2=""}}},d=c,u=a("2877"),m=Object(u["a"])(d,n,i,!1,null,null,null);t["default"]=m.exports},c93e:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("a322");function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},i=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),i.forEach((function(t){Object(n["a"])(e,t,a[t])}))}return e}}}]);
//# sourceMappingURL=chunk-8b86ca24.7b7bfec4.js.map